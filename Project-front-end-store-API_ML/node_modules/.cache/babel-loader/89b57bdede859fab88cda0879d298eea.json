{"ast":null,"code":"var _jsxFileName = \"/home/phlopes/Projetos/sd-010-a-project-frontend-online-store/src/pages/Home/index.jsx\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from '../../components/Button/index';\nimport CategoriesBar from '../../components/CategoriesBar/index';\nimport ListProducts from '../../components/ListProducts';\nimport SearchBar from '../../components/SearchBar';\nimport { getCategories, getProductsFromCategoryAndQuery } from '../../services/api';\nimport './styles.css';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.generateArray = async item => {\n      const array = await getProductsFromCategoryAndQuery(false, item);\n      this.setState({\n        productsList: array.results\n      });\n    };\n\n    this.addProductToCart = obj => {\n      const {\n        productsInCart\n      } = this.state;\n      this.setState({\n        productsInCart: [...productsInCart, obj]\n      });\n    };\n\n    this.fetchCategories = this.fetchCategories.bind(this);\n    this.getProductsFromCategory = this.getProductsFromCategory.bind(this);\n    this.state = {\n      categories: [],\n      productsList: [],\n      productsInCart: []\n    };\n  }\n\n  componentDidMount() {\n    this.fetchCategories();\n  }\n\n  async getProductsFromCategory(categoryId) {\n    const response = await getProductsFromCategoryAndQuery(categoryId);\n    this.setState({\n      productsList: response.results\n    });\n  }\n\n  async fetchCategories() {\n    const categories = await getCategories();\n    this.setState({\n      categories\n    });\n  }\n\n  render() {\n    const {\n      categories,\n      productsList,\n      productsInCart\n    } = this.state;\n    const location = {\n      pathname: '/Cart',\n      state: {\n        item: productsInCart\n      }\n    };\n    return /*#__PURE__*/React.createElement(\"main\", {\n      id: \"home-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CategoriesBar, {\n      categories: categories,\n      onClick: this.getProductsFromCategory,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, {\n      func: this.generateArray,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      \"data-testid\": \"shopping-cart-button\",\n      to: location,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, \"Cart\")), productsList.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }, \"Nenhum produto foi encontrado\") : /*#__PURE__*/React.createElement(ListProducts, {\n      productsList: productsList,\n      addProductToCart: this.addProductToCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    })));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/phlopes/Projetos/sd-010-a-project-frontend-online-store/src/pages/Home/index.jsx"],"names":["React","Link","Button","CategoriesBar","ListProducts","SearchBar","getCategories","getProductsFromCategoryAndQuery","Home","Component","constructor","props","generateArray","item","array","setState","productsList","results","addProductToCart","obj","productsInCart","state","fetchCategories","bind","getProductsFromCategory","categories","componentDidMount","categoryId","response","render","location","pathname","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Button from '../../components/Button/index';\nimport CategoriesBar from '../../components/CategoriesBar/index';\nimport ListProducts from '../../components/ListProducts';\nimport SearchBar from '../../components/SearchBar';\n\nimport { getCategories, getProductsFromCategoryAndQuery } from '../../services/api';\n\nimport './styles.css';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchCategories = this.fetchCategories.bind(this);\n    this.getProductsFromCategory = this.getProductsFromCategory.bind(this);\n\n    this.state = {\n      categories: [],\n      productsList: [],\n      productsInCart: [],\n    };\n  }\n\n  componentDidMount() {\n    this.fetchCategories();\n  }\n\n  async getProductsFromCategory(categoryId) {\n    const response = await getProductsFromCategoryAndQuery(categoryId);\n\n    this.setState({ productsList: response.results });\n  }\n\n  generateArray = async (item) => {\n    const array = await getProductsFromCategoryAndQuery(false, item);\n    this.setState({\n      productsList: array.results,\n    });\n  }\n\n  addProductToCart = (obj) => {\n    const { productsInCart } = this.state;\n\n    this.setState({\n      productsInCart: [...productsInCart, obj],\n    });\n  }\n\n  async fetchCategories() {\n    const categories = await getCategories();\n\n    this.setState({ categories });\n  }\n\n  render() {\n    const { categories, productsList, productsInCart } = this.state;\n    const location = {\n      pathname: '/Cart',\n      state: {\n        item: productsInCart,\n      },\n    };\n\n    return (\n      <main id=\"home-page\">\n        <CategoriesBar\n          categories={ categories }\n          onClick={ this.getProductsFromCategory }\n        />\n\n        <section>\n          <SearchBar func={ this.generateArray } />\n\n          <Button>\n            <Link data-testid=\"shopping-cart-button\" to={ location }>Cart</Link>\n          </Button>\n\n          {productsList.length === 0\n            ? <p>Nenhum produto foi encontrado</p>\n            : (\n              <ListProducts\n                productsList={ productsList }\n                addProductToCart={ this.addProductToCart }\n              />)}\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}