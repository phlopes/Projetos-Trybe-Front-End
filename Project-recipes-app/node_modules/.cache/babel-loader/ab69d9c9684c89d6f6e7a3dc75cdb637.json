{"ast":null,"code":"var _jsxFileName = \"/home/phlopes/Projetos/sd-010-a-project-recipes-app/src/components/searchBar/index.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { AppContext } from '../../context/AppContext';\nimport { fetchByIngredientApi, fetchByNameApi, fetchByFirstLetterApi } from '../../services/fetchApiRadio';\nexport default function SearchBar() {\n  const {\n    context\n  } = useContext(AppContext);\n  const {\n    setSearchValue,\n    inputValue,\n    setInputValue,\n    pageOrigin,\n    searchValue,\n    recipesList,\n    setRecipesList\n  } = context;\n  let searchResults = '';\n  const length = 1;\n  const NUM_RECIPES_SHOWN = 12;\n  const history = useHistory();\n  useEffect(() => {\n    if (recipesList.length === 1) {\n      const oneRecipe = recipesList[0];\n      const path = pageOrigin === 'themealdb' ? '/comidas' : '/bebidas';\n      history.push(`${path}/${oneRecipe.idMeal || oneRecipe.idDrink}`);\n    }\n  }, [recipesList, history, pageOrigin]);\n\n  async function apiSearch(value, input, page) {\n    switch (value) {\n      case 'ingredient-search':\n        searchResults = await fetchByIngredientApi(input, page);\n        searchResults.splice(NUM_RECIPES_SHOWN, searchResults.length - 1);\n        setRecipesList(searchResults);\n        break;\n\n      case 'name-search':\n        searchResults = await fetchByNameApi(input, page);\n        searchResults.splice(NUM_RECIPES_SHOWN, searchResults.length - 1);\n        setRecipesList(searchResults);\n        break;\n\n      case 'first-letter-search':\n        if (input.length > length) {\n          alert('Sua busca deve conter somente 1 (um) caracter');\n        } else {\n          searchResults = await fetchByFirstLetterApi(input, page);\n          searchResults.splice(NUM_RECIPES_SHOWN, searchResults.length - 1);\n          setRecipesList(searchResults);\n        }\n\n        break;\n\n      default:\n        return searchResults;\n    }\n  }\n\n  function generateRadioButtons(value, label, dataTest) {\n    return /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"search-radio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, label, /*#__PURE__*/React.createElement(\"input\", {\n      value: value,\n      name: \"search-radio\",\n      onClick: ev => setSearchValue(ev.target.value),\n      type: \"radio\",\n      \"data-testid\": dataTest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n    \"data-testid\": \"search-input\",\n    type: \"text\",\n    value: inputValue,\n    onChange: ev => setInputValue(ev.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), generateRadioButtons('ingredient-search', 'Ingrediente', 'ingredient-search-radio'), generateRadioButtons('name-search', 'Nome', 'name-search-radio'), generateRadioButtons('first-letter-search', 'Primeira letra', 'first-letter-search-radio'), /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"exec-search-btn\",\n    type: \"button\",\n    onClick: () => apiSearch(searchValue, inputValue, pageOrigin),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, \"Buscar\"));\n}","map":{"version":3,"sources":["/home/phlopes/Projetos/sd-010-a-project-recipes-app/src/components/searchBar/index.js"],"names":["React","useContext","useEffect","useHistory","AppContext","fetchByIngredientApi","fetchByNameApi","fetchByFirstLetterApi","SearchBar","context","setSearchValue","inputValue","setInputValue","pageOrigin","searchValue","recipesList","setRecipesList","searchResults","length","NUM_RECIPES_SHOWN","history","oneRecipe","path","push","idMeal","idDrink","apiSearch","value","input","page","splice","alert","generateRadioButtons","label","dataTest","ev","target"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { AppContext } from '../../context/AppContext';\nimport {\n  fetchByIngredientApi,\n  fetchByNameApi,\n  fetchByFirstLetterApi,\n} from '../../services/fetchApiRadio';\n\nexport default function SearchBar() {\n  const { context } = useContext(AppContext);\n  const {\n    setSearchValue,\n    inputValue,\n    setInputValue,\n    pageOrigin,\n    searchValue,\n    recipesList,\n    setRecipesList,\n\n  } = context;\n  let searchResults = '';\n  const length = 1;\n  const NUM_RECIPES_SHOWN = 12;\n  const history = useHistory();\n\n  useEffect(() => {\n    if (recipesList.length === 1) {\n      const oneRecipe = recipesList[0];\n      const path = pageOrigin === 'themealdb' ? '/comidas' : '/bebidas';\n      history.push(`${path}/${oneRecipe.idMeal || oneRecipe.idDrink}`);\n    }\n  }, [recipesList, history, pageOrigin]);\n\n  async function apiSearch(value, input, page) {\n    switch (value) {\n    case 'ingredient-search':\n      searchResults = await fetchByIngredientApi(input, page);\n      searchResults.splice(NUM_RECIPES_SHOWN, searchResults.length - 1);\n      setRecipesList(searchResults);\n      break;\n    case 'name-search':\n      searchResults = await fetchByNameApi(input, page);\n      searchResults.splice(NUM_RECIPES_SHOWN, searchResults.length - 1);\n      setRecipesList(searchResults);\n      break;\n    case 'first-letter-search':\n      if (input.length > length) {\n        alert('Sua busca deve conter somente 1 (um) caracter');\n      } else {\n        searchResults = await fetchByFirstLetterApi(input, page);\n        searchResults.splice(NUM_RECIPES_SHOWN, searchResults.length - 1);\n        setRecipesList(searchResults);\n      }\n      break;\n\n    default:\n      return searchResults;\n    }\n  }\n\n  function generateRadioButtons(value, label, dataTest) {\n    return (\n      <label htmlFor=\"search-radio\">\n        {label}\n        <input\n          value={ value }\n          name=\"search-radio\"\n          onClick={ (ev) => setSearchValue(ev.target.value) }\n          type=\"radio\"\n          data-testid={ dataTest }\n        />\n      </label>\n    );\n  }\n\n  return (\n    <>\n      <input\n        data-testid=\"search-input\"\n        type=\"text\"\n        value={ inputValue }\n        onChange={ (ev) => setInputValue(ev.target.value) }\n      />\n\n      {generateRadioButtons('ingredient-search',\n        'Ingrediente', 'ingredient-search-radio')}\n      {generateRadioButtons('name-search',\n        'Nome', 'name-search-radio')}\n      {generateRadioButtons('first-letter-search',\n        'Primeira letra', 'first-letter-search-radio')}\n      <button\n        data-testid=\"exec-search-btn\"\n        type=\"button\"\n        onClick={ () => apiSearch(searchValue, inputValue, pageOrigin) }\n      >\n        Buscar\n\n      </button>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}