{"ast":null,"code":"import _objectSpread from \"/home/phlopes/Projetos/sd-010-a-project-trivia-react-redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/phlopes/Projetos/sd-010-a-project-trivia-react-redux/src/components/Login.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FiSettings } from 'react-icons/fi';\nimport { saveQuestionsThunk, loginActionThunk } from '../Redux/actions';\nimport { fetchToken } from '../services/Api';\nimport '../styles/login.css';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: '',\n      name: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleChange({\n    target: {\n      name,\n      value\n    }\n  }) {\n    this.setState({\n      [name]: value\n    });\n  }\n\n  async saveLocalStorage() {\n    const _ref = await fetchToken(),\n          token = _ref.token;\n\n    localStorage.setItem('token', token);\n    return token;\n  }\n\n  async handleClick() {\n    const _this$props = this.props,\n          login = _this$props.login,\n          save = _this$props.save;\n    const token = await this.saveLocalStorage();\n    login(_objectSpread({}, this.state, {\n      token\n    }));\n    const DEFAULT_AMOUNT = 5;\n    save(DEFAULT_AMOUNT, token);\n  }\n\n  render() {\n    const _this$state = this.state,\n          name = _this$state.name,\n          email = _this$state.email;\n    return React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login-inputs-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login-inputs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Nome:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      id: \"name\",\n      \"data-testid\": \"input-player-name\",\n      onChange: this.handleChange,\n      value: name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"login-inputs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"Email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Email:\", React.createElement(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      id: \"email\",\n      \"data-testid\": \"input-gravatar-email\",\n      onChange: this.handleChange,\n      value: email,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"login-buttons-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/game\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"btn-play\",\n      disabled: !(email && name),\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Jogar\")), React.createElement(Link, {\n      id: \"a-settings\",\n      to: \"/settings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(FiSettings, {\n      className: \"btn-settings\",\n      \"data-testid\": \"btn-settings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  token: state.loginReducer.token\n});\n\nconst mapDispatchToProps = dispatch => ({\n  login: state => dispatch(loginActionThunk(state)),\n  save: (amount, token) => dispatch(saveQuestionsThunk(amount, token))\n});\n\nLogin.propTypes = {\n  login: PropTypes.func\n}.isRequired;\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/phlopes/Projetos/sd-010-a-project-trivia-react-redux/src/components/Login.jsx"],"names":["React","PropTypes","connect","Link","FiSettings","saveQuestionsThunk","loginActionThunk","fetchToken","Login","Component","constructor","state","email","name","handleChange","bind","handleClick","target","value","setState","saveLocalStorage","token","localStorage","setItem","props","login","save","DEFAULT_AMOUNT","render","mapStateToProps","loginReducer","mapDispatchToProps","dispatch","amount","propTypes","func","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FiSettings } from 'react-icons/fi';\nimport { saveQuestionsThunk, loginActionThunk } from '../Redux/actions';\nimport { fetchToken } from '../services/Api';\nimport '../styles/login.css';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: '',\n      name: '',\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleChange({ target: { name, value } }) {\n    this.setState({ [name]: value });\n  }\n\n  async saveLocalStorage() {\n    const { token } = await fetchToken();\n    localStorage.setItem('token', token);\n    return token;\n  }\n\n  async handleClick() {\n    const { login, save } = this.props;\n    const token = await this.saveLocalStorage();\n    login({ ...this.state, token });\n    const DEFAULT_AMOUNT = 5;\n    save(DEFAULT_AMOUNT, token);\n  }\n\n  render() {\n    const { name, email } = this.state;\n    return (\n      <form>\n        <div className=\"login-inputs-container\">\n          <div className=\"login-inputs\">\n            <label htmlFor=\"name\">\n              Nome:\n              <input\n                type=\"text\"\n                name=\"name\"\n                id=\"name\"\n                data-testid=\"input-player-name\"\n                onChange={ this.handleChange }\n                value={ name }\n              />\n            </label>\n          </div>\n          <div className=\"login-inputs\">\n            <label htmlFor=\"Email\">\n              Email:\n              <input\n                type=\"email\"\n                name=\"email\"\n                id=\"email\"\n                data-testid=\"input-gravatar-email\"\n                onChange={ this.handleChange }\n                value={ email }\n              />\n            </label>\n          </div>\n        </div>\n        <div className=\"login-buttons-container\">\n          <Link to=\"/game\">\n            <button\n              type=\"button\"\n              data-testid=\"btn-play\"\n              disabled={ !(email && name) }\n              onClick={ this.handleClick }\n            >\n              Jogar\n            </button>\n          </Link>\n          <Link id=\"a-settings\" to=\"/settings\">\n            <FiSettings className=\"btn-settings\" data-testid=\"btn-settings\" />\n          </Link>\n        </div>\n      </form>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  token: state.loginReducer.token,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  login: (state) => dispatch(loginActionThunk(state)),\n  save: (amount, token) => dispatch(saveQuestionsThunk(amount, token)),\n});\n\nLogin.propTypes = {\n  login: PropTypes.func,\n}.isRequired;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}